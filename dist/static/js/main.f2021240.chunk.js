(this.webpackJsonpridesharepwa=this.webpackJsonpridesharepwa||[]).push([[0],{589:function(e,t,a){e.exports=a(767)},594:function(e,t,a){},767:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),i=a.n(l),o=(a(594),a(30)),s=a(31),c=a(34),u=a(33),m=a(21),d=a(85),h=a(41),p=a(13),g=Object(p.b)(null,(function(e){return{signOut:function(){return e((function(e,t,a){var n=(0,a.getFirebase)();n.auth().signOut().then((function(){n.logout(),e({type:"SIGNOUT_SUCCESS"})})).catch((function(t){e({type:"SIGNOUT_ERROR",err:t})}))}))}}}))((function(e){return r.a.createElement("div",null,r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(m.c,{className:"link",fontWeight:"fontWeightBold",to:"/create"},"New Post")),r.a.createElement("li",null,r.a.createElement("a",{className:"link",fontWeight:"fontWeightBold",onClick:e.signOut},"Log Out")),r.a.createElement("li",null,r.a.createElement(m.c,Object(h.a)({className:"link",to:"/myaccount"},"className","btn btn-floating pink lighten-1"),e.profile.initials))))})),f=function(){return r.a.createElement("div",null,r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(m.c,{to:"/signup"},"Signup")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/signin"},"Login"))))},E=Object(p.b)((function(e){return console.log(e),{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,a=e.profile,n=t.uid?r.a.createElement(g,{profile:a}):r.a.createElement(f,null);return r.a.createElement("nav",{className:"nav-wrapper grey darken-3"},r.a.createElement("div",{className:"container"},r.a.createElement(m.b,{to:"/",className:"brand-logo"},r.a.createElement("i",{className:"fas fa-car-side"}),"RideShare"),n))})),b=a(278),v=a.n(b),N=a(376),y=a(45),C=(a(766),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleSubmit=e.handleSubmit.bind(Object(y.a)(e)),e}return Object(s.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(e);var t=e.target.elements.comment.value;console.log(t),console.log(this.props.id),this.props.createComment(t,this.props.id),e.target.elements.comment.value=""}},{key:"render",value:function(){var e=this,t=this.props.comments,a=[{}];return Array.isArray(t)?(console.log(t),t.map((function(t){console.log(t);var n=t.authorFirstName;return Array.isArray(t.singlepersoncomments)?t.singlepersoncomments.map((function(e){return console.log(e),a.push({authorName:n,comment:e.value})})):a.push({authorName:n,comment:e.props.comments[0].singlepersoncomments[0].value}),a})),console.log(a)):(console.log("no comments"),a.push("No Comments")),r.a.createElement("div",null,a.map((function(e,t){return r.a.createElement("p",{key:e.index}," ",e.authorName," - ",e.comment," ")})),r.a.createElement("p",{id:"commentcount"},a.length," Comments"),r.a.createElement("div",{className:"comment"},r.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",placeholder:"comment",name:"comment"}),r.a.createElement("input",{type:"submit",hidden:!0}))))}}]),a}(n.Component)),O=Object(p.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createComment:function(t,a){return e(function(e,t){return function(a,n,r){r.getFirebase;var l=(0,r.getFirestore)(),i=(n().firebase.profile,n().firebase.auth.uid);l.collection("posts").doc(t).get().then((function(e){console.log("Cached document data:",e.data());e.data();var t=e.data().comments;return console.log(t),t})).then((function(a){console.log(i);var r=a.filter((function(e){return e.authorId==i}));if(console.log(r),0!=r.length){r.map((function(t){return t.singlepersoncomments.push({createdAt:new Date,value:e})}));var o=a.filter((function(e){return e.authorId!=i}));console.log(o),o.push(r),console.log(o),a.singlepersoncomments=o,l.collection("posts").doc(t).set({comments:a},{merge:!0})}else{console.log(a),a.push({authorFirstName:n().firebase.profile.firstName,authorLastName:n().firebase.profile.lastName,authorId:i,singlepersoncomments:[{createdAt:new Date,value:e}]});var s=a;console.log(s),l.collection("posts").doc(t).set({comments:s},{merge:!0})}})).catch((function(e){console.log("Error getting cached document:",e)})).then((function(){a({type:"CREATE_COMMENT",comment:e,postId:t})})).catch((function(e){a({type:"CREATE_COMMENT_ERROR",err:e})}))}}(t,a))}}}))(C),S=a(27),k=a(40),w=function(e,t){return console.log(t),function(a,n,r){r.getFirebase;var l=(0,r.getFirestore)();n().firebase.profile,n().firebase.auth.uid;l.collection("posts").doc(e).set(Object(S.a)({},t)).then((function(){a({type:"UPDATE_POST",postId:e,updatedState:t})})).catch((function(e){a({type:"UPDATE_POST_ERROR",err:e})}))}},P=function(e){var t=e.post;return console.log(t),r.a.createElement("div",{className:"card z-depth-0 post-summary"},r.a.createElement("div",{className:"card-content text-darken-3"},r.a.createElement("span",{className:"card-title "},t.title),r.a.createElement("p",null,"Posted by ",t.authorFirstName," ",t.authorLastName),r.a.createElement("p",{className:"black-text"},t.createdAt.toDate().toDateString())))},j=function(e){var t="fa fa-heart";return e.liked||(t+="-o"),r.a.createElement("i",{onClick:e.onClick,style:{cursor:"pointer"},className:t,"aria-hidden":"true",liked:e.liked})},F=function(e){var t="fas fa-star";return e.starred||(t="far fa-star"),r.a.createElement("i",{id:"bookmark",onClick:e.onClick,style:{cursor:"pointer"},className:t,"aria-hidden":"true",starred:e.starred})},R=a(24),x=a(32),A=void 0,I=Object(R.d)(Object(p.b)(null,(function(e){return{deletePost:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=(0,n.getFirestore)();a().firebase.profile,a().firebase.auth.uid;r.collection("posts").doc(e).delete().then((function(){console.log("Document successfully deleted!")})).then((function(){t({type:"DELETE_POST",postId:e})})).catch((function(e){t({type:"DELETE_POST_ERROR",err:e})}))}}(t))}}})),Object(k.firestoreConnect)([{collection:"posts"}]))((function(e){var t=e.posts,a=e.onLike,n=e.onBookmark;return t&&t.sort((function(e,t){return console.log(e.createdAt),console.log(t.createdAt),t.createdAt-e.createdAt})),r.a.createElement("div",{className:"post-list section"},t&&t.sort((function(e,t){return e.createdAt.timestamp-t.createdAt.timestamp}))&&t.map((function(e){console.log(e.liked);var t=x.auth().currentUser;return e.authorId==t.uid?r.a.createElement("div",null,r.a.createElement(m.b,{to:"/post/"+e.id},r.a.createElement(P,{post:e,key:e.id})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1",onClick:function(){return A.props.deletePost(e.id)}},"Delete")),"public"==e.privacy?r.a.createElement("div",null,"Email: ",e.email):r.a.createElement("div",null)):r.a.createElement("div",null,r.a.createElement(m.b,{to:"/post/"+e.id},r.a.createElement(P,{post:e,key:e.id}),"public"==e.privacy?r.a.createElement("div",null,"Email",e.email):r.a.createElement("div",null)),r.a.createElement(j,{liked:e.liked,onClick:function(){return a(e)}}),r.a.createElement(F,{starred:e.starred,onClick:function(){return n(e)}}))})))})),T=a(577),_=a.n(T),U=function(e){var t=e.notifications;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"Notifications"),r.a.createElement("ul",{className:"online-users"},t&&t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("span",{className:"pink-text"},e.user," "),r.a.createElement("span",null,e.content),r.a.createElement("div",{className:"note-date grey-text"},_()(e.time.toDate()).fromNow()))}))))))},D=a(811),L=a(279),M=a(812),z=a(809),V=a(810),W=a(808),G=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).getposts=function(e,t){if(console.log(t),console.log(n.props.allposts),console.log(e),isNaN(e)||"title"==t){var a=n.props.allposts.filter((function(a){return a[t].includes(e)}));n.setState({filteredposts:a})}else{var r=n.props.allposts.filter((function(a){return a[t]==e}));n.setState({filteredposts:r})}},n.onSearchInputChange=function(e){if(n.state)n.state.searchString;e.target.value?n.setState({searchString:e.target.value}):n.setState({searchString:""}),n.getposts(n.state.searchString,"title")},n.handleChange=function(e){if(console.log(e.target.id),n.state)n.state.searchString;e.target.value?n.setState({searchString:e.target.value}):n.setState({searchString:""}),console.log(n.state.searchString),n.getposts(n.state.searchString,e.target.id)},n.handleLike=function(e){var t=n.state.searchString?n.state.filteredposts:n.props.allposts;if(console.log(t),t){var a=t.indexOf(e),r=e.id;console.log(a),t[a].liked=!t[a].liked,n.setState({filteredposts:t}),n.props.likePost(r,t[a])}},n.handleBookmark=function(e){var t=n.state.searchString?n.state.filteredposts:n.props.allposts;if(t){console.log(typeof e);var a=t.indexOf(e),r=e.id;console.log(a),t[a].starred=!t[a].starred,n.setState({filteredposts:t}),console.log(t[a]),n.props.bookmarkPost(r,t[a])}},n.handleChange1=function(e,t){n.setState({value:t})},n.keyPressed=n.keyPressed.bind(Object(y.a)(n)),n.handleLike=n.handleLike.bind(Object(y.a)(n)),n}return Object(s.a)(a,[{key:"componentWillMount",value:function(){console.log(this.props),this.setState({searchString:"",value:"Post"})}},{key:"componentDidMount",value:function(){var e=Object(N.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.allposts;case 2:console.log(this.props),this.setState({filteredposts:this.props.allposts}),console.log(this.state.filteredposts);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"keyPressed",value:function(e){"Enter"===e.key&&this.getposts(this.state.searchString,"title")}},{key:"render",value:function(){var e=this;this.requests=[],this.posts=[],console.log(this.props),console.log(this.state.value);var t=this.props,a=t.auth,n=t.allposts,l=t.notifications;return console.log(n),this.props.allposts&&this.props.allposts.map((function(t){"Request"==t.type?e.requests.push(t):e.posts.push(t)})),console.log(this.requests),console.log(this.posts),a.uid?r.a.createElement("div",{className:"main container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6 dashboard"},this.props.allposts?r.a.createElement("div",null,r.a.createElement(D.a,{style:{padding:10},autoFocus:!0,className:"searchInput",placeholder:"Search for posts",margin:"normal",onInput:this.onSearchInputChange,onKeyPress:this.keyPressed})):"No posts found",r.a.createElement("div",{className:"main-container shadow"},r.a.createElement("div",{className:"side-filters"},r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"arrival",className:"materialize-textarea",onInput:this.handleChange}),r.a.createElement("label",{htmlFor:"arrival"},"Arrival City")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"origin",className:"materialize-textarea",onInput:this.handleChange}),r.a.createElement("label",{htmlFor:"origin"},"Origin City")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"origin",className:"materialize-textarea",onInput:this.handleChange}),r.a.createElement("label",{htmlFor:"origin"},"Via")),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"number",id:"luggage",onChange:this.handleChange,min:"0",max:"5"}),r.a.createElement("label",{htmlFor:"luggage"},"Luggage space")),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"number",id:"seats",onChange:this.handleChange,min:"1",max:"3"}),r.a.createElement("label",{htmlFor:"seats"},"Seats available"))),r.a.createElement("div",{className:"posts-container"},r.a.createElement(L.a,{value:this.state.value},r.a.createElement(W.a,{position:"static"},r.a.createElement(M.a,{onChange:this.handleChange1.bind(this),"aria-label":"simple tabs example"},r.a.createElement(z.a,{label:"Post A Ride",value:"Post"}),r.a.createElement(z.a,{label:"Request A Ride",value:"Request"}))),r.a.createElement(V.a,{value:"Post"},r.a.createElement(I,{onLike:this.handleLike.bind(this),posts:this.state.searchString?this.state.filteredposts:this.posts,onBookmark:this.handleBookmark.bind(this)})),r.a.createElement(V.a,{value:"Request"},r.a.createElement(I,{onLike:this.handleLike.bind(this),posts:this.state.searchString?this.state.filteredposts:this.requests,onBookmark:this.handleBookmark.bind(this)})))))),r.a.createElement("div",{className:"col s12 m5 offset-m1 notifications"},r.a.createElement(U,{notifications:l})))):r.a.createElement(d.a,{to:"/signin"})}}]),a}(n.Component),B=Object(R.d)(Object(p.b)((function(e){return console.log(e),{allposts:e.firestore.ordered.posts,auth:e.firebase.auth,notifications:e.firestore.ordered.notifications}}),(function(e){return{likePost:function(t,a){return e(w(t,a))},bookmarkPost:function(t,a){return e(function(e,t){return console.log(t),function(a,n,r){var l=r.getFirebase,i=(0,r.getFirestore)(),o=l(),s=n().firebase.profile;console.log(s),console.log(n().firebase.auth);var c=n().firebase.auth.uid;console.log(c);n().firebase.auth.email,n().firebase.auth.phoneNumber;i.collection("posts").doc(e).set(Object(S.a)({},t)).then((function(){a({type:"UPDATE_POST",postId:e,updatedState:t})})).catch((function(e){a({type:"UPDATE_POST_ERROR",err:e})})),i.collection("users").doc(c).update({favourites:o.firestore.FieldValue.arrayUnion(e)}).then((function(){a({type:"BOOKMARK_POST",postId:e})})).catch((function(e){a({type:"BOOKMARK_POST_ERROR",err:e})}))}}(t,a))}}})),Object(k.firestoreConnect)([{collection:"posts",orderBy:["createdAt","desc"]},{collection:"notifications",limit:3,orderBy:["time","desc"]}]))(G),q=(a(368),a(579)),K=(a.n(q)()(),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleChange=function(e){console.log(e.target.id),n.setState(Object(h.a)({},e.target.id,e.target.value))},n.handleUpdate=n.handleUpdate.bind(Object(y.a)(n)),n.handleChange=n.handleChange.bind(Object(y.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;console.log(e),this.props.getAPost(e)}},{key:"componentDidUpdate",value:function(e){console.log(e),this.props.posts!==e.posts?console.log("updated"):console.log("not updated")}},{key:"handleUpdate",value:function(e){e.preventDefault(),console.log(this),console.log(this.props),console.log(this.state),this.props.updatePost(this.props.id,this.state),this.props.history.push("/")}},{key:"render",value:function(){var e=this.props,t=e.posts,a=e.auth,n=e.comments;if(console.log(this.props),!a.uid)return r.a.createElement(d.a,{to:"/signin"});var l=x.auth().currentUser;return t?r.a.createElement("div",{className:"container section post-details"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},t.title),r.a.createElement("p",null,t.content)),r.a.createElement("div",{className:"card-action grey lighten-4 grey-text"},r.a.createElement("div",null,"Posted by ",t.authorFirstName,t.authorLastName),r.a.createElement("form",{onSubmit:this.handleUpdate},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{autoFocus:!0,type:"text",id:"title",onChange:this.handleChange,defaultValue:t.title}),r.a.createElement("label",{htmlFor:"title"},"Post Title")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"content",className:"materialize-textarea",defaultValue:t.content,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"content"},"Post Content")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"origin",className:"materialize-textarea",defaultValue:t.origin,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"origin"},"Origin City")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"arrival",className:"materialize-textarea",defaultValue:t.arrival,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"arrival"},"Arrival City")),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"time",id:"deptime",name:"dep-time",min:"09:00",max:"18:00",defaultValue:t.deptime,required:!0})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"time",id:"returntime",name:"return-time",min:"09:00",max:"18:00",defaultValue:t.returntime})),r.a.createElement("label",{htmlFor:"start"},"Start date:"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"date",id:"startdate",name:"trip-start",value:t.startdate,min:"2020-01-01",max:"2020-12-31"})),r.a.createElement("label",{htmlFor:"start"},"Return date:"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"date",id:"returndate",name:"trip-start",value:t.returndate,min:"2020-01-01",max:"2020-12-31"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"via",className:"materialize-textarea",defaultValue:t.via,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"via"},"Via")),r.a.createElement("label",{htmlFor:"gender"},"RIT Student"),r.a.createElement("div",{className:"input-field radiobutton",defaultChecked:t.origin},r.a.createElement("input",{type:"radio",name:"ritstudent",value:"none",checked:"checked",onChange:this.handleChange})," Yes",r.a.createElement("input",{type:"radio",name:"ritstudent",value:"some",onChange:this.handleChange})," No"),r.a.createElement("label",{htmlFor:"gender"},"Gender"),r.a.createElement("div",{className:"input-field radiobutton",defaultChecked:t.gender},r.a.createElement("input",{type:"radio",name:"gender",value:"male"})," Male",r.a.createElement("input",{type:"radio",name:"gender",value:"female"})," Female"),r.a.createElement("label",{htmlFor:"gender"},"Disability"),r.a.createElement("div",{className:"input-field radiobutton"},r.a.createElement("input",{type:"radio",name:"disability",value:"none",deafaultchecked:"checked"})," None",r.a.createElement("input",{type:"radio",name:"disability",value:"some"})," Some"),r.a.createElement("div",{className:"input-field"},r.a.createElement("select",{id:"ethnicity",defaultValue:"Asian"},r.a.createElement("option",{value:"Asian"},"Asian"),r.a.createElement("option",{value:"African"},"African"),r.a.createElement("option",{value:"White"},"White"),r.a.createElement("option",{value:"Latino/Hispanic"},"Latino"),r.a.createElement("option",{value:"MiddleEast"},"MiddleEast")),r.a.createElement("label",{htmlFor:"Ethnicity"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"number",id:"luggage",defaultValue:t.luggage,onChange:this.handleChange,min:"0",max:"5"}),r.a.createElement("label",{htmlFor:"luggage"},"No of luggage space available")),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"number",id:"seats",defaultValue:t.seats,onChange:this.handleChange,min:"1",max:"3"}),r.a.createElement("label",{htmlFor:"seats"},"No of seats available")),r.a.createElement("label",{htmlFor:"age"},"Choose age group (yrs):"),r.a.createElement("div",{className:"input-field"},r.a.createElement("select",{id:"age",defaultValue:"20-30"},r.a.createElement("option",{value:"20-30"},"20-30"),r.a.createElement("option",{value:"30-40"},"30-40"),r.a.createElement("option",{value:"40-50"},"40-50"),r.a.createElement("option",{value:"50-60"},"50-60"),r.a.createElement("option",{value:"60-70"},"60-70"))),r.a.createElement("div",{className:"input-field"},t.authorId==l.uid?r.a.createElement("input",{type:"submit",value:"Submit",className:"btn pink lighten-1"}):r.a.createElement("input",{disabled:!0,type:"submit",value:"Submit",className:"btn pink lighten-1"}))),r.a.createElement(O,{createComment:this.props.createComment,comments:n,id:this.props.id})))):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"Loading post..."))}}]),a}(n.Component)),J=Object(p.b)((function(e,t){console.log(e);var a=t.match.params.id,n=e.posts;return{posts:n,comments:n?n.comments:null,id:a,auth:e.firebase.auth}}),(function(e){return{getAPost:function(t){var a;e((a=t,function(e,t,n){(0,n.getFirestore)().collection("posts").doc(a).get().then((function(t){if(t.exists){var a=t.data();e({type:"GET_POST",data:a})}else console.log("does not exist")}))}))},updatePost:function(t,a){return e(w(t,a))}}}))(K),Y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"white",onSubmit:this.handleSubmit},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign In"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Login"),r.a.createElement("div",{className:"red-text center"},t?r.a.createElement("p",null,t):null))))}}]),a}(n.Component),H=Object(R.d)(Object(p.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((a=t,function(e,t,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(a.email,a.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",err:t})}))}));var a}}})))(Y),X=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",firstName:"",lastName:"",image:null,url:"",phoneNumber:0,progress:0},e.handleImageAsFile=function(t){if(console.log("start of upload"),t.target.files[0]){var a=t.target.files[0];e.setState((function(){return{image:a}}))}},e.handleUpload=function(t){t.preventDefault();var a=e.state.image;Object(x.storage)().ref("images/".concat(a.name)).put(a).on("state_changed",(function(t){var a=Math.round(t.bytesTransferred/t.totalBytes*100);e.setState({progress:a})}),(function(e){console.log(e)}),(function(){Object(x.storage)().ref("images").child(a.name).getDownloadURL().then((function(t){console.log(t),e.setState({url:t}),console.log(t)}))}))},e.handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),console.log(e.state),e.props.signUp(e.state)},e}return Object(s.a)(a,[{key:"render",value:function(){return this.props.auth.uid?r.a.createElement(d.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"white",onSubmit:this.handleSubmit},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign Up"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",id:"firstName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",id:"lastName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"phoneNumber"},"Mobile Number"),r.a.createElement("input",{type:"number",id:"phoneNumber",onChange:this.handleChange})),r.a.createElement("div",{style:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},r.a.createElement("label",{htmlFor:"DL"},"Please Upload You Valid Drivers Licence"),r.a.createElement("progress",{value:this.state.progress,max:"100"}),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onChange:this.handleImageAsFile}),r.a.createElement("button",{onClick:this.handleUpload},"Upload"),r.a.createElement("br",null),r.a.createElement("img",{src:this.state.url||"http://via.placeholder.com/400x300",alt:"Uploaded images",height:"300",width:"400"})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Sign Up"))))}}]),a}(n.Component),Q=Object(p.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase,l=n.getFirestore,i=r(),o=l();i.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return o.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0],phoneNumber:e.phoneNumber,email:e.email,image:e.url})})).then((function(){t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t({type:"SIGNUP_ERROR",err:e})}))}}(t))}}}))(X),$=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={title:"",content:""},e.handleChange=function(t){console.log(t.target),t.target.id?e.setState(Object(h.a)({},t.target.id,t.target.value)):e.setState(Object(h.a)({},t.target.className,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),console.log(e.type),e.props.createPost(e.state,e.type),e.props.history.push("/")},e}return Object(s.a)(a,[{key:"render",value:function(){return this.props.auth.uid?r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"white",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"post_or_request"}),r.a.createElement("select",{id:"type",onChange:this.handleChange},r.a.createElement("option",{value:"post"},"Post a Ride"),r.a.createElement("option",{value:"request"},"Request a Ride"))),r.a.createElement("h5",{className:"grey-text text-darken-3"},"Create a New Post"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"text",id:"title",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"title"},"Post Title")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"content",className:"materialize-textarea",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"content"},"Post Content")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"origin",className:"materialize-textarea",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"origin"},"Origin City")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"arrival",className:"materialize-textarea",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"arrival"},"Arrival City")),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"time",id:"dep-time",name:"dep-time",min:"09:00",max:"18:00",required:!0,onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"time",id:"return-time",name:"return-time",min:"09:00",max:"18:00",onChange:this.handleChange})),r.a.createElement("label",{for:"start"},"Start date:"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"date",id:"startdate",name:"trip-start",defaultValue:new Date,min:"2020-01-01",max:"2020-12-31",onChange:this.handleChange})),r.a.createElement("label",{for:"start"},"Return date:"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"date",id:"returndate",name:"trip-end",defaultValue:new Date,min:"2020-01-01",max:"2020-12-31",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"via",className:"materialize-textarea",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"via"},"Via")),r.a.createElement("label",{htmlFor:"ritstudent"},"RIT Student"),r.a.createElement("div",{className:"input-field radiobutton"},r.a.createElement("input",{className:"ritstudent",type:"radio",name:"ritstudent",value:"yes",onChange:this.handleChange})," Yes",r.a.createElement("input",{className:"ritstudent",type:"radio",name:"ritstudent",value:"no",onChange:this.handleChange})," No"),r.a.createElement("label",{htmlFor:"gender"},"Gender"),r.a.createElement("div",{className:"input-field radiobutton"},r.a.createElement("input",{className:"gender",type:"radio",name:"gender",value:"male",onChange:this.handleChange})," Male",r.a.createElement("input",{className:"gender",type:"radio",name:"gender",value:"female",onChange:this.handleChange})," Female"),r.a.createElement("label",{htmlFor:"disability"},"Disability"),r.a.createElement("div",{className:"input-field radiobutton"},r.a.createElement("input",{className:"disability",type:"radio",name:"disability",value:"none",onChange:this.handleChange})," None",r.a.createElement("input",{className:"disability",type:"radio",name:"disability",value:"some",onChange:this.handleChange})," Some"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"Ethnicity"}),r.a.createElement("select",{id:"ethnicity",onChange:this.handleChange},r.a.createElement("option",{value:"Asian"},"Asian"),r.a.createElement("option",{value:"African"},"African"),r.a.createElement("option",{value:"White"},"White"),r.a.createElement("option",{value:"Latino/Hispanic"},"Latino"),r.a.createElement("option",{value:"MiddleEast"},"MiddleEast"))),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"number",id:"luggage",onChange:this.handleChange,min:"0",max:"5"}),r.a.createElement("label",{htmlFor:"luggage"},"No of luggage space available")),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"number",id:"seats",onChange:this.handleChange,min:"1",max:"3"}),r.a.createElement("label",{htmlFor:"seats"},"No of seats available")),r.a.createElement("label",{htmlFor:"age"},"Choose age group (yrs):"),r.a.createElement("div",{className:"input-field"},r.a.createElement("select",{id:"age",defaultValue:"20-30",onChange:this.handleChange},r.a.createElement("option",{value:"20-30"},"20-30"),r.a.createElement("option",{value:"30-40"},"30-40"),r.a.createElement("option",{value:"40-50"},"40-50"),r.a.createElement("option",{value:"50-60"},"50-60"),r.a.createElement("option",{value:"60-70"},"60-70"))),r.a.createElement("label",{htmlFor:"privacy"},"Privacy:"),r.a.createElement("div",{className:"input-field"},r.a.createElement("select",{id:"privacy",defaultValue:"public",onChange:this.handleChange},r.a.createElement("option",{value:"public"},"public"),r.a.createElement("option",{value:"private"},"private"))),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1"},"Create")))):r.a.createElement(d.a,{to:"/signin"})}}]),a}(n.Component),Z=Object(p.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createPost:function(t){return e(function(e){return console.log(e),function(t,a,n){n.getFirebase;var r=(0,n.getFirestore)(),l=a().firebase.profile;console.log(l),console.log(a().firebase.auth);var i=a().firebase.auth.uid;console.log(i);var o=a().firebase.auth.email,s=a().firebase.auth.phoneNumber;r.collection("posts").add(Object(S.a)(Object(S.a)({},e),{},{liked:!1,starred:!1,authorFirstName:l.firstName,authorLastName:l.lastName,authorId:i,createdAt:new Date,email:o,phoneNumber:s})).then((function(){t({type:"CREATE_POST",post:e})})).catch((function(e){t({type:"CREATE_POST_ERROR",err:e})}))}}(t))}}}))($),ee=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).onSignoutPress=function(){r.props.signOut()},r.reauthenticate=function(e){console.log(r.props);var t=r.props.firebaseauth.currentUser,a=r.props.auth.EmailAuthProvider.credential(t.email,e);return t.reauthenticateWithCredential(a)},r.onChangePasswordPress=function(){console.log(r.props),r.reauthenticate(r.state.currentPassword).then((function(){r.props.firebaseauth.currentUser.updatePassword(r.state.newPassword).then((function(){n.Alert.alert("Password was changed")})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)}))},r.onChangeEmailPress=function(){r.reauthenticate(r.state.currentPassword).then((function(){r.props.firebaseauth.currentUser.updateEmail(r.state.newEmail).then((function(){n.Alert.alert("Email was changed")})).catch((function(e){console.log(e.message)}))})).catch((function(e){console.log(e.message)}))},r.onSignoutPress=r.onSignoutPress.bind(Object(y.a)(r)),r.onChangePasswordPress=r.onChangePasswordPress.bind(Object(y.a)(r)),r.onChangeEmailPress=r.onChangeEmailPress.bind(Object(y.a)(r)),r}return Object(s.a)(a,[{key:"componentWillMount",value:function(){this.setState({newEmail:"",newPassword:"",currentPassword:""})}},{key:"componentDidMount",value:function(){console.log(this.props),this.setState({myposts:this.props.myposts}),console.log(this.state.myposts)}},{key:"checkUser",value:function(e){return function(t){return console.log(t.authorId),console.log(t.authorId==e),t.authorId==e}}},{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props,a=(t.authError,t.auth,t.firebaseauth,t.myposts);console.log(a);var n=x.auth().currentUser;console.log(n.uid);var l=this.props.myposts.filter((function(e){return e.authorId==n.uid}));return console.log(l),r.a.createElement("div",{className:"container"},r.a.createElement("button",{className:"myaccount-btn signout btn pink lighten-1 z-depth-0",onClick:this.onSignoutPress},"Sign out"),r.a.createElement("h5",{className:"grey-text text-darken-3"},"Password Reset"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"current password"},"Current Password"),r.a.createElement("input",{type:"password",id:"current password",autoCapitalize:"none",secureTextEntry:!0,onChange:function(t){return e.setState({currentPassword:t.target.value})}})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"new password"},"New Password"),r.a.createElement("input",{type:"password",id:"new password",autoCapitalize:"none",secureTextEntry:!0,onChange:function(t){return e.setState({newPassword:t.target.value})}})),r.a.createElement("button",{className:"myaccount-btn btn pink lighten-1 z-depth-0",onClick:this.onChangePasswordPress},"Change Password"),r.a.createElement("div",{className:"main-container shadow"},r.a.createElement("b",null,r.a.createElement("h6",{id:"myrides"},"MyRides")),r.a.createElement("div",{className:"posts-container"},r.a.createElement(I,{posts:l}))))}}]),a}(n.Component),te=Object(R.d)(Object(p.b)((function(e){return console.log(e),{myposts:e.firestore.ordered.posts,authError:e.auth.authError,auth:x.auth,firebaseauth:x.auth()}}),(function(e){return{signOut:function(){return e((function(e,t,a){var n=(0,a.getFirebase)();n.auth().signOut().then((function(){n.logout(),e({type:"SIGNOUT_SUCCESS"})})).catch((function(t){e({type:"SIGNOUT_ERROR",err:t})}))}))}}})),Object(k.firestoreConnect)([{collection:"posts"}]))(ee),ae=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:B}),r.a.createElement(d.b,{path:"/post/:id",component:J}),r.a.createElement(d.b,{path:"/signin",component:H}),r.a.createElement(d.b,{path:"/signup",component:Q}),r.a.createElement(d.b,{path:"/myaccount",component:te}),r.a.createElement(d.b,{path:"/create",component:Z}))))}}]),a}(n.Component),ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");ne?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):le(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):le(e)}))}}function le(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ie={authError:null},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login error"),Object(S.a)(Object(S.a)({},e),{},{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(S.a)(Object(S.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup sucess"),Object(S.a)(Object(S.a)({},e),{},{authError:t.err.message});case"SIGNUP_ERROR":return console.log("signup error"),Object(S.a)(Object(S.a)({},e),{},{authError:t.err.message});default:return e}},se={posts:[{id:"1",title:"ride from nj to nyc",content:"blah blah blah"},{id:"2",title:"ride from phil to roch",content:"blah blah blah"},{id:"3",title:"to n from from roch to nyc",content:"blah blah blah"}]},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;t.data;switch(t.type){case"CREATE_POST":return console.log("created post",t.post),console.log(e),e;case"CREATE_POST_ERROR":return console.log("created post error",t.err),e;case"DELETE_POST":return console.log("deleted post",t.postId),e;case"DELETE_POST_ERROR":return console.log("delete post error",t.err),e;case"UPDATE_POST":return console.log("updated post",t.postId,t.updatedState),e=t.updatedState;case"UPDATE_POST_ERROR":return console.log("update post error",t.err),e;case"GET_POST":return console.log("got post",t.data),e=t.data;default:return e}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_COMMENT":return console.log(t.postId),Object(S.a)(Object(S.a)({},e),{},Object(h.a)({},t.postId,[t.comment]));default:return e}},me=a(134),de=Object(R.c)({auth:oe,posts:ce,comments:ue,firestore:me.firestoreReducer,firebase:k.firebaseReducer}),he=a(580),pe=a(135),ge=a.n(pe);a(763),a(764),a(765);ge.a.initializeApp({apiKey:"AIzaSyCPUreeodJGGhj2NSWEp5mYed7WB9J69a4",authDomain:"ridesharepwa-ed714.firebaseapp.com",databaseURL:"https://ridesharepwa-ed714.firebaseio.com",projectId:"ridesharepwa-ed714",storageBucket:"ridesharepwa-ed714.appspot.com",messagingSenderId:"939284105760",appId:"1:939284105760:web:f7ffbd6c77871ee4054a45"}),ge.a.firestore().settings({timestampsInSnapshots:!0});ge.a.storage();var fe="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||R.d,Ee=Object(R.e)(de,fe(Object(R.a)(he.a.withExtraArgument({getFirebase:k.getFirebase,getFirestore:me.getFirestore})),Object(k.reactReduxFirebase)(ge.a,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0}),Object(me.reduxFirestore)(ge.a)));Ee.firebaseAuthIsReady.then((function(){i.a.render(r.a.createElement(p.a,{store:Ee},r.a.createElement(ae,null)),document.getElementById("root")),re()}))}},[[589,1,2]]]);
//# sourceMappingURL=main.f2021240.chunk.js.map